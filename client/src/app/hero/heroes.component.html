<h2 class="text-center">My Heroes</h2>

<app-hero-form [heroes]="heroes"></app-hero-form>

<div class="container text-center">
  <div class="row">
    <div class="col">
      <ul class="list-group mb-4 d-flex mx-auto">
        <div class="">
          <div class="form-check ps-0">
            <li
              *ngFor="let hero of heroes"
              class="list-group-item d-flex justify-content-between"
            >
              <a
                routerLink="/heroes/detail/{{ hero._id }}"
                class="text-decoration-none flex-row"
                for="flexCheckChecked"
              >
                <span class="d-flex">Name: {{ hero.name | capitalize }}</span>
              </a>
              <tag-input
                [ngModel]="hero.tags"
                [removable]="false"
                (onSelect)="onSelectOfRemoveTags($any($event))"
              >
                <ng-template item-template let-item="item" let-index="index">
                  <span>#{{ item }} </span>
                </ng-template>
              </tag-input>
            </li>
          </div>
        </div>
      </ul>
    </div>
    <div class="col">
      <div>
        <!-- Add tags -->
        <div class="mb-4">
          <h5 class="text-center mt-4">Select heroes for add tags</h5>
          <tag-input
            (onAdd)="onAddOfAddHeros($any($event))"
            [(ngModel)]="heroObjectAdd"
            [editable]="true"
            [identifyBy]="'id'"
            [displayBy]="'name'"
            placeholder="Enter heroes"
            secondaryPlaceholder="Enter heroes"
            [onlyFromAutocomplete]="true"
          >
            <tag-input-dropdown
              [showDropdownIfEmpty]="true"
              [autocompleteObservable]="requestAutocompleteItemsFake"
              [identifyBy]="'_id'"
              [displayBy]="'name'"
            >
              >
            </tag-input-dropdown>
          </tag-input>
        </div>

        <tag-input
          [(ngModel)]="tags"
          (onAdd)="onAddOfAddTags($any($event))"
          (onSelect)="onSelectOfAddTags($any($event))"
          [modelAsStrings]="true"
          #input1
          (onTextChange)="onTextChange($any($event))"
          ><ng-template item-template let-item="item" let-index="index">
            <span>#{{ item }} </span>
            <span
              (click)="input1.removeItem(item, index)"
              class="ng2-tag__remove-button"
            >
              x
            </span>
          </ng-template>
        </tag-input>

        <button
          type="button"
          (click)="addTagsToHeroes()"
          class="btn btn-success"
        >
          Save
        </button>

        <!-- Delete tags for heroes -->

        <div class="mb-4">
          <h5 class="text-center mt-4">Select heroes for remove tags</h5>
          <tag-input
            (onAdd)="onAddOfRemoveHeros($any($event))"
            [(ngModel)]="heroObjectRemove"
            [editable]="true"
            [identifyBy]="'id'"
            [displayBy]="'name'"
            placeholder="Enter heroes"
            secondaryPlaceholder="Enter heroes"
            [onlyFromAutocomplete]="true"
          >
            <tag-input-dropdown
              [showDropdownIfEmpty]="true"
              [autocompleteObservable]="requestAutocompleteItemsFake"
              [identifyBy]="'_id'"
              [displayBy]="'name'"
            >
              >
            </tag-input-dropdown>
          </tag-input>
        </div>

        <tag-input
          [(ngModel)]="selectedTags"
          (onAdd)="onAddOfRemoveTags($any($event))"
          (onSelect)="onSelectOfRemoveTags($any($event))"
          (onRemove)="onRemoveOfRemoveTags($any($event))"
          [modelAsStrings]="true"
          #input2
          (onTextChange)="onTextChange($any($event))"
          placeholder="Tags of heroes"
          secondaryPlaceholder="Enter tags"
          ><ng-template item-template let-item="item" let-index="index">
            <span>#{{ item }} </span>
            <span
              (click)="input2.removeItem(item, index)"
              class="ng2-tag__remove-button"
            >
              x
            </span>
          </ng-template>
        </tag-input>

        <button
          type="button"
          (click)="deleteTagsFromHeroes()"
          class="btn btn-danger"
        >
          Delete Tags
        </button>
      </div>
    </div>
  </div>
</div>

<div *ngIf="heroes.length === 0" class="text-center">
  <h4>No hero found</h4>
</div>
